<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.1"><title>RT Analytics - SaaS Big Data Demo</title><link rel=stylesheet href=../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#real-time-analytics-with-kinesis-data-analytics class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="SaaS Big Data Demo" class="md-header__button md-logo" aria-label="SaaS Big Data Demo" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> SaaS Big Data Demo </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> RT Analytics </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/big-data-tenant-analytics.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="SaaS Big Data Demo" class="md-nav__button md-logo" aria-label="SaaS Big Data Demo" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> SaaS Big Data Demo </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/big-data-tenant-analytics.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../dashboard/ class=md-nav__link> Business Dashboard </a> </li> <li class=md-nav__item> <a href=../design/ class=md-nav__link> Architecture & Design </a> </li> <li class=md-nav__item> <a href=../eks/ class=md-nav__link> EKS </a> </li> <li class=md-nav__item> <a href=../model/ class=md-nav__link> ML model </a> </li> <li class=md-nav__item> <a href=../api-lambda/ class=md-nav__link> API Gateway - Lambda </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> RT Analytics <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> RT Analytics </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#kinesis-data-streams class=md-nav__link> Kinesis Data Streams </a> </li> <li class=md-nav__item> <a href=#kinesis-data-analytics class=md-nav__link> Kinesis Data Analytics </a> <nav class=md-nav aria-label="Kinesis Data Analytics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#why-kinesis-data-analytics class=md-nav__link> Why Kinesis Data Analytics </a> </li> <li class=md-nav__item> <a href=#code-base class=md-nav__link> Code base </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=#code-approach class=md-nav__link> Code approach </a> </li> <li class=md-nav__item> <a href=#deeper-dive class=md-nav__link> Deeper dive </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deployment class=md-nav__link> Deployment </a> <nav class=md-nav aria-label=Deployment> <ul class=md-nav__list> <li class=md-nav__item> <a href=#manual-deployment-with-the-console class=md-nav__link> Manual deployment with the Console </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#clean-up class=md-nav__link> Clean up </a> </li> <li class=md-nav__item> <a href=#logging-in-cloudwatch class=md-nav__link> Logging in CloudWatch </a> </li> <li class=md-nav__item> <a href=#to-rework class=md-nav__link> to rework </a> </li> <li class=md-nav__item> <a href=#current-error class=md-nav__link> Current error </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../java-apps/ class=md-nav__link> Tenant Manager </a> </li> <li class=md-nav__item> <a href=../cdk/ class=md-nav__link> Infrastructure as code </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-studies/ class=md-nav__link> AWS studies </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#kinesis-data-streams class=md-nav__link> Kinesis Data Streams </a> </li> <li class=md-nav__item> <a href=#kinesis-data-analytics class=md-nav__link> Kinesis Data Analytics </a> <nav class=md-nav aria-label="Kinesis Data Analytics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#why-kinesis-data-analytics class=md-nav__link> Why Kinesis Data Analytics </a> </li> <li class=md-nav__item> <a href=#code-base class=md-nav__link> Code base </a> </li> <li class=md-nav__item> <a href=#parameters class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=#code-approach class=md-nav__link> Code approach </a> </li> <li class=md-nav__item> <a href=#deeper-dive class=md-nav__link> Deeper dive </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deployment class=md-nav__link> Deployment </a> <nav class=md-nav aria-label=Deployment> <ul class=md-nav__list> <li class=md-nav__item> <a href=#manual-deployment-with-the-console class=md-nav__link> Manual deployment with the Console </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#clean-up class=md-nav__link> Clean up </a> </li> <li class=md-nav__item> <a href=#logging-in-cloudwatch class=md-nav__link> Logging in CloudWatch </a> </li> <li class=md-nav__item> <a href=#to-rework class=md-nav__link> to rework </a> </li> <li class=md-nav__item> <a href=#current-error class=md-nav__link> Current error </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/jbcodeforce/big-data-tenant-analytics.git/edit/master/docs/rt-analytics.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=real-time-analytics-with-kinesis-data-analytics>Real-time analytics with Kinesis Data Analytics<a class=headerlink href=#real-time-analytics-with-kinesis-data-analytics title="Permanent link">&para;</a></h1> <p>The goal of this component is to compute stateful analytics, do data transformation, from the data coming in streams. The current implementation illustrates remote async calls to SageMaker (via API Gateway) and persistence to S3.</p> <p><img alt src=../diagrams/qs-arch.drawio.png></p> <p><strong>Figure 1: Streaming components</strong></p> <h2 id=kinesis-data-streams>Kinesis Data Streams<a class=headerlink href=#kinesis-data-streams title="Permanent link">&para;</a></h2> <p>There is nothing special in this demonstration, the creation of the different data streams is done using CDK. </p> <ul> <li><code>bigdatajobs</code>: for job related events</li> <li><code>companies</code>: for event related to tenant entities events</li> <li><code>enrichedcompanies</code> to shared events with enriched data to be consumed by other services.</li> </ul> <p>See <a href=https://github.com/jbcodeforce/big-data-tenant-analytics/tree/main/setup/kinesis-cdk/app.py>the python file kinesis-cdk/app.py</a> for the CDK definitions of those streams and to deploy them, do a <code>cdk deploy</code> under the folder: <a href=https://github.com/jbcodeforce/big-data-tenant-analytics/tree/main/setup/kinesis-cdk>setup/kinesis-cdk</a>. The persistence is set to 24 hours.</p> <h2 id=kinesis-data-analytics>Kinesis Data Analytics<a class=headerlink href=#kinesis-data-analytics title="Permanent link">&para;</a></h2> <h3 id=why-kinesis-data-analytics>Why Kinesis Data Analytics<a class=headerlink href=#why-kinesis-data-analytics title="Permanent link">&para;</a></h3> <p>This is a managed service, serverless, to run real-time streaming logic implemented using SQL, java, Scala. The core technology used is Apache Flink. The service is integrated with Kinesis Data Streams, and with a lot of AWS services to serve as sources or sinks. Kinesis Data Analytics provides the underlying infrastructure for Flink applications. It handles core capabilities like provisioning compute resources, parallel computation, automatic scaling, and application backups implemented as checkpoints and snapshots.</p> <h3 id=code-base>Code base<a class=headerlink href=#code-base title="Permanent link">&para;</a></h3> <p>The code is under <a href=https://github.com/jbcodeforce/big-data-tenant-analytics/tree/main/rt-analytics/bg-job-processing>rt-analytics/bg-job-processing</a> folder.</p> <p>The main input stream includes the job events, and are published to Kinesis Data Streams names <code>bigdatajobs</code>. Once received we need to enrich with the company data, which lead to an asynchronous call to TenantManager service. The Company response includes: company_id, industry, revenu, employees, job30, job90, monthlyFee, totalFee in a form of JSON document.</p> <p>Once Company data is collected, the call to the ML scoring model is also done asynchronously, the churn flag may be update.</p> <p>The final step is to write to S3 bucket.</p> <h3 id=parameters>Parameters<a class=headerlink href=#parameters title="Permanent link">&para;</a></h3> <p>The following parameters need to be specified</p> <table> <thead> <tr> <th>Parameter</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td>aws.region</td> <td>Region where all the services run</td> <td>us-west-2</td> </tr> <tr> <td>jobs.stream.initial.position</td> <td>Position in the streams to start consuming from</td> <td>LATEST</td> </tr> <tr> <td>jobs.stream.name</td> <td>Job events stream name</td> <td>bigdatajobs</td> </tr> <tr> <td>S3SinkPath</td> <td>Bucket to write enriched company events</td> <td></td> </tr> <tr> <td>predictChurnApiEndpoint</td> <td>URL of the API in API gateway</td> <td></td> </tr> <tr> <td>predictChurnApiKey</td> <td></td> <td>None for API Gateway</td> </tr> </tbody> </table> <p>Those parameters are defined in the Application Creation request. <a href=https://github.com/jbcodeforce/big-data-tenant-analytics/blob/main/rt-analytics/create_request-tmpl.json>See create-request.json file</a></p> <details class=-> <summary>EnvironmentProperties in request.json</summary> <p><code>json "EnvironmentProperties": { "PropertyGroups": [ { "PropertyGroupId": "ProducerConfigProperties", "PropertyMap": { "flink.stream.initpos": "LATEST", "aws.region": "us-west-2", "AggregationEnabled": "false" } }, { "PropertyGroupId": "ApplicationConfigProperties", "PropertyMap": { "predictChurnApiEndpoint": "https://API.execute-api.us-west-2.amazonaws.com/prod/assessChurn", "predictChurnApiKey" : " ", "S3SinkPath": "s3://jb-data-set/churn/data" } }, { "PropertyGroupId": "ConsumerConfigProperties", "PropertyMap": { "aws.region": "us-west-2", "jobs.stream.initial.position": "LATEST", "jobs.stream.name": "bigdatajobs", "companies.stream.initial.position": "LATEST", "companies.stream.name": "companies" } } ] },</code></p> </details> <h3 id=code-approach>Code approach<a class=headerlink href=#code-approach title="Permanent link">&para;</a></h3> <p>The Flink data source is a KinesisConsumer and the declaration looks mostly always the same:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>org.apache.flink.streaming.connectors.kinesis.FlinkKinesisConsumer</span><span class=p>;</span><span class=w></span>

<span class=c1>// in the main()</span><span class=w></span>

<span class=kd>final</span><span class=w> </span><span class=n>StreamExecutionEnvironment</span><span class=w> </span><span class=n>env</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>StreamExecutionEnvironment</span><span class=p>.</span><span class=na>getExecutionEnvironment</span><span class=p>();</span><span class=w></span>

<span class=n>env</span><span class=p>.</span><span class=na>addSource</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>FlinkKinesisConsumer</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=n>inputStreamName</span><span class=p>,</span><span class=w></span>
<span class=w>                </span><span class=k>new</span><span class=w> </span><span class=n>SimpleStringSchema</span><span class=p>(),</span><span class=w></span>
<span class=w>                </span><span class=n>inputProperties</span><span class=p>));</span><span class=w></span>
</code></pre></div> <p>Then we want to map the job information and extract the company_ID and map to a Company entity:</p> <div class=highlight><pre><span></span><code><span class=w> </span><span class=n>DataStream</span><span class=o>&lt;</span><span class=n>Company</span><span class=o>&gt;</span><span class=w> </span><span class=n>companyStream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jobStreams</span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>jobEvent</span><span class=w> </span><span class=o>-&gt;</span><span class=w>  </span><span class=p>{</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>words</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jobEvent</span><span class=p>.</span><span class=na>split</span><span class=p>(</span><span class=s>&quot;,&quot;</span><span class=p>);</span><span class=w></span>
<span class=w>                </span><span class=n>Company</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getCompanyRecord</span><span class=p>(</span><span class=n>words</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>);</span><span class=w></span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>c</span><span class=p>;</span><span class=w></span>
<span class=w>        </span><span class=p>});</span><span class=w></span>
</code></pre></div> <p>The asynchronous call to the API Gateway and then sageMaker is done using Flink construct and custom class for HttpRequest:</p> <div class=highlight><pre><span></span><code><span class=n>DataStream</span><span class=o>&lt;</span><span class=n>HttpRequest</span><span class=o>&lt;</span><span class=n>Company</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>predictChurnRequest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>companyStream</span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>company</span><span class=w> </span><span class=o>-&gt;</span><span class=w>  </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HttpRequest</span><span class=o>&lt;</span><span class=n>Company</span><span class=o>&gt;</span><span class=p>(</span><span class=n>company</span><span class=p>,</span><span class=n>SdkHttpMethod</span><span class=p>.</span><span class=na>POST</span><span class=p>).</span><span class=na>withBody</span><span class=p>(</span><span class=n>mapper</span><span class=p>.</span><span class=na>writeValueAsString</span><span class=p>(</span><span class=n>company</span><span class=p>));</span><span class=w></span>
<span class=w>            </span><span class=p>})</span><span class=w></span>
<span class=w>            </span><span class=p>.</span><span class=na>returns</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>TypeHint</span><span class=o>&lt;</span><span class=n>HttpRequest</span><span class=o>&lt;</span><span class=n>Company</span><span class=o>&gt;&gt;</span><span class=p>()</span><span class=w> </span><span class=p>{});;</span><span class=w></span>

<span class=w>        </span><span class=n>DataStream</span><span class=o>&lt;</span><span class=n>HttpResponse</span><span class=o>&lt;</span><span class=n>Company</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>predictChurnResponse</span><span class=w> </span><span class=o>=</span><span class=w></span>
<span class=w>            </span><span class=c1>// Asynchronously call Endpoint</span><span class=w></span>
<span class=w>            </span><span class=n>AsyncDataStream</span><span class=p>.</span><span class=na>unorderedWait</span><span class=p>(</span><span class=w></span>
<span class=w>                </span><span class=n>predictChurnRequest</span><span class=p>,</span><span class=w></span>
<span class=w>                </span><span class=k>new</span><span class=w> </span><span class=n>Sig4SignedHttpRequestAsyncFunction</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=n>predictChurnEndpoint</span><span class=p>),</span><span class=w></span>
<span class=w>                </span><span class=mi>30</span><span class=p>,</span><span class=w> </span><span class=n>TimeUnit</span><span class=p>.</span><span class=na>SECONDS</span><span class=p>,</span><span class=w> </span><span class=mi>20</span><span class=w></span>
<span class=w>            </span><span class=p>)</span><span class=w></span>
<span class=w>            </span><span class=p>.</span><span class=na>returns</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>TypeHint</span><span class=o>&lt;</span><span class=n>HttpResponse</span><span class=o>&lt;</span><span class=n>Company</span><span class=o>&gt;&gt;</span><span class=p>()</span><span class=w> </span><span class=p>{});</span><span class=w></span>

<span class=w>        </span><span class=n>DataStream</span><span class=o>&lt;</span><span class=n>Company</span><span class=o>&gt;</span><span class=w> </span><span class=n>enrichedCompany</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>predictChurnResponse</span><span class=w></span>
<span class=w>            </span><span class=c1>// Only keep successful responses for enrichment, which have a 200 status code</span><span class=w></span>
<span class=w>            </span><span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>response</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=na>statusCode</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>200</span><span class=p>)</span><span class=w></span>
<span class=w>            </span><span class=c1>// Enrich Company with response from predictChurn</span><span class=w></span>
<span class=w>            </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>response</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=kt>boolean</span><span class=w> </span><span class=n>expectedChurn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mapper</span><span class=p>.</span><span class=na>readValue</span><span class=p>(</span><span class=n>response</span><span class=p>.</span><span class=na>responseBody</span><span class=p>,</span><span class=w> </span><span class=n>ObjectNode</span><span class=p>.</span><span class=na>class</span><span class=p>).</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;churn&quot;</span><span class=p>).</span><span class=na>asBoolean</span><span class=p>();</span><span class=w></span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=na>triggeringEvent</span><span class=p>.</span><span class=na>withExpectedChurn</span><span class=p>(</span><span class=n>expectedChurn</span><span class=p>);</span><span class=w></span>
<span class=w>            </span><span class=p>});</span><span class=w></span>
</code></pre></div> <p>Here is an example of the job definition as deployed on AWS Data Analytics:</p> <p><img alt src=../images/flink-console.png></p> <h3 id=deeper-dive>Deeper dive<a class=headerlink href=#deeper-dive title="Permanent link">&para;</a></h3> <ul> <li><a href=https://catalog.us-east-1.prod.workshops.aws/workshops/63069e26-921c-4ce1-9cc7-dd882ff62575/en-US/lab7>Real Time ML inference on Streaming Data</a></li> <li><a href=https://github.com/aws-solutions/streaming-data-solution-for-amazon-kinesis-and-amazon-msk>Streaming Data Solution for Amazon Kinesis Git repo</a></li> <li><a href=https://docs.aws.amazon.com/kinesisanalytics/latest/java/examples-s3.html>S3 sink with Flink</a></li> </ul> <h2 id=deployment>Deployment<a class=headerlink href=#deployment title="Permanent link">&para;</a></h2> <ol> <li> <p>Create IAM role to support application execution</p> <p>We need to create a role and permission policy so the application can access source and sink resources and assume the role for <code>kinesisanalytics.amazonaws.com</code> service:</p> <div class=highlight><pre><span></span><code>aws iam create-role --role-name CompanyAnalyticsRole --assume-role-policy-document file://trust-relationship.json
</code></pre></div> </li> <li> <p>We need to define permissions policy with two statements: one that grants permissions for the read action on the source streams, and another that grants permissions for write actions on the sink stream which will be S3 bucker and Data Streams:</p> <details class=-> <summary>IAM policy</summary> <div class=highlight><pre><span></span><code><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;Version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2012-10-17&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;Statement&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>        </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;ReadCodeFromS3&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;s3:GetObject&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;s3:GetObjectVersion&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>],</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;arn:aws:s3:::jb-data-set/churn/bg-job-processing-1.0.0.jar&quot;</span><span class=p>]</span><span class=w></span>
<span class=w>        </span><span class=p>},</span><span class=w></span>
<span class=w>        </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;CompanySinkS3&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;s3:PutObject&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;logs:DescribeLogStreams&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>],</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;arn:aws:s3:::jb-data-set/churn/*&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;arn:aws:logs:us-west-2:ACCOUNT_NUMBER:log-group:/aws/kinesis-analytics/CompanyJobProcessing:log-stream:*&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>]</span><span class=w></span>
<span class=w>        </span><span class=p>},</span><span class=w></span>
<span class=w>        </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;DescribeLogGroups&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;logs:DescribeLogGroups&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>],</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;arn:aws:logs:us-west-2:ACCOUNT_NUMBER:log-group:*&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>]</span><span class=w></span>
<span class=w>        </span><span class=p>},</span><span class=w></span>
<span class=w>        </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;DescribeLogStreams&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;logs:DescribeLogStreams&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>],</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;arn:aws:logs:us-west-2:ACCOUNT_NUMBER:log-group:/aws/kinesis-analytics/CompanyJobProcessing:log-stream:*&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>]</span><span class=w></span>
<span class=w>        </span><span class=p>},</span><span class=w></span>
<span class=w>        </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;PutCloudwatchLogs&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;logs:PutLogEvents&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>],</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;arn:aws:logs:us-west-2:ACCOUNT_NUMBER:log-group:/aws/kinesis-analytics/CompanyJobProcessing:log-stream:kinesis-analytics-log-stream&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>]</span><span class=w></span>
<span class=w>        </span><span class=p>},</span><span class=w></span>
<span class=w>        </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;ReadInputStream&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;kinesis:*&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;arn:aws:kinesis:us-west-2:ACCOUNT_NUMBER:stream/companies&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>                </span><span class=s2>&quot;arn:aws:kinesis:us-west-2:ACCOUNT_NUMBER:stream/bigdatajobs&quot;</span><span class=w></span>
<span class=w>            </span><span class=p>]</span><span class=w></span>
<span class=w>        </span><span class=p>},</span><span class=w></span>
<span class=w>        </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Sid&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;WriteOutputStream&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Effect&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Allow&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;kinesis:*&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;arn:aws:kinesis:us-west-2:ACCOUNT_NUMBER:stream/enrichedcompanies&quot;</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>]</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> </details> </li> <li> <p>Attach the policy to an IAM role </p> <div class=highlight><pre><span></span><code>aws iam put-role-policy --role-name CompanyAnalyticsRole --policy-name KinesisPolicy --policy-document file://security-policy.json
</code></pre></div> </li> <li> <p>Build the java packaging and upload it to S3</p> <div class=highlight><pre><span></span><code><span class=c1># build the uber jar</span>
mvn package -Dflink.version<span class=o>=</span><span class=m>1</span>.15.2
<span class=c1># upload to S3</span>
aws s3 cp <span class=k>$(</span><span class=nb>pwd</span><span class=k>)</span>/target/bg-job-processing-1.0.0.jar s3://jb-data-set/churn/bg-job-processing-1.0.0.jar
</code></pre></div> </li> <li> <p>Create the Data Analytics application</p> <p><code>sh aws kinesisanalyticsv2 create-application --cli-input-json file://create_request.json</code></p> </li> <li> <p>Start the Kinesis Analytics apps</p> <div class=highlight><pre><span></span><code>aws kinesisanalyticsv2 start-application --cli-input-json file://start_application.json
</code></pre></div> </li> <li> <p>Send some data as job manager will do (use Start Python Env docker container):</p> <div class=highlight><pre><span></span><code>python src/main/python/SendJobEventToKinesis.py 
</code></pre></div> </li> <li> <p>To update code, we need to delete previous code, upload new version to S3, and update application:</p> <div class=highlight><pre><span></span><code>aws s3 rm s3://jb-data-set/churn/bg-job-processing-1.0.0.jar
aws s3 cp <span class=k>$(</span><span class=nb>pwd</span><span class=k>)</span>/target/bg-job-processing-1.0.0.jar s3://jb-data-set/churn/bg-job-processing-1.0.0.jar
<span class=c1># Get application ID</span>
aws kinesisanalyticsv2 describe-application --application-name CompanyJobProcessing
<span class=c1># result looks like</span>
<span class=o>{</span>
<span class=s2>&quot;ApplicationDetail&quot;</span>: <span class=o>{</span>
    <span class=s2>&quot;ApplicationARN&quot;</span>: <span class=s2>&quot;arn:aws:kinesisanalytics:us-west-2:4....6:application/CompanyJobProcessing&quot;</span>,
    <span class=s2>&quot;ApplicationDescription&quot;</span>: <span class=s2>&quot;Java Flink app to merge company and big data job events&quot;</span>,
    <span class=s2>&quot;ApplicationName&quot;</span>: <span class=s2>&quot;CompanyJobProcessing&quot;</span>,
    <span class=s2>&quot;RuntimeEnvironment&quot;</span>: <span class=s2>&quot;FLINK-1_15&quot;</span>,
    <span class=s2>&quot;ServiceExecutionRole&quot;</span>: <span class=s2>&quot;arn:aws:iam::....:role/CompanyAnalyticsRole&quot;</span>,
    <span class=s2>&quot;ApplicationStatus&quot;</span>: <span class=s2>&quot;RUNNING&quot;</span>,
    <span class=s2>&quot;ApplicationVersionId&quot;</span>: <span class=m>3</span>,
<span class=o>}</span>
<span class=c1># Modify the updateApplication.json file with the application ID</span>
aws kinesisanalyticsv2 update-application --application-name CompanyJobProcessing --cli-input-json file://updateApplication.json
</code></pre></div> </li> </ol> <h3 id=manual-deployment-with-the-console>Manual deployment with the Console<a class=headerlink href=#manual-deployment-with-the-console title="Permanent link">&para;</a></h3> <p>Using the Kinesis console we can add an Analytics Application:</p> <ol> <li> <p>Select the Flink runtime version:</p> <p><img alt src=../images/kinesis-app-1.png></p> </li> <li> <p>Select the IAM role or create a new one. </p> <p><img alt src=../images/kinesis-app-2.png></p> </li> <li> <p>For demonstration we can use the Development deployment with 1 </p> <p><img alt src=../images/kinesis-app-3.png></p> </li> <li> <p>Add configuration detail to get packaged code: ``</p> <p><img alt src=../images/kda-config-job.png></p> </li> <li> <p>Specifying the logging level</p> <p><img alt src=../images/kda-logging.png></p> </li> <li> <p>Once deployed, start the job with the <code>Run without snapshot</code> option:</p> <p><img alt src=../images/kda-run.png></p> </li> </ol> <h2 id=clean-up>Clean up<a class=headerlink href=#clean-up title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>aws kinesisanalyticsv2 stop-application --application-name CompanyJobProcessing --force 
aws kinesisanalyticsv2 describe-application --application-name CompanyJobProcessing <span class=p>|</span> jq 
aws kinesisanalyticsv2 delete-application --application-name CompanyJobProcessing --create-timestamp <span class=m>2022</span>-12-23T17:02:09-08:00
</code></pre></div> <div class=highlight><pre><span></span><code>aws s3 rm s3://jb-data-set/churn/bg-job-processing-1.0.0.jar
</code></pre></div> <h2 id=logging-in-cloudwatch>Logging in CloudWatch<a class=headerlink href=#logging-in-cloudwatch title="Permanent link">&para;</a></h2> <p>As logging as enabled in the configuration, we can see the details of the job execution in the Log groups named <code>/aws/kinesis-analytics/CompanyJobProcessing</code></p> <h2 id=to-rework>to rework<a class=headerlink href=#to-rework title="Permanent link">&para;</a></h2> <p>Joins between company and job streams on the company ID and add the number of jobs run (from job event) to the company current jobs count.</p> <ul> <li>Job is: company_id, userid , #job_submitted</li> <li>Out come is : company_id, industry, revenu, employees, job30 + #job_submitted, job90 + #job_submitted, monthlyFee, totalFee</li> </ul> <h2 id=current-error>Current error<a class=headerlink href=#current-error title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=mi>2023</span><span class=o>-</span><span class=mo>01</span><span class=o>-</span><span class=mo>04</span><span class=w> </span><span class=mi>21</span><span class=p>:</span><span class=mi>43</span><span class=p>:</span><span class=mi>34</span><span class=w></span>
<span class=n>com</span><span class=p>.</span><span class=na>esotericsoftware</span><span class=p>.</span><span class=na>kryo</span><span class=p>.</span><span class=na>KryoException</span><span class=p>:</span><span class=w> </span><span class=n>Unable</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=n>find</span><span class=w> </span><span class=kd>class</span><span class=err>:</span> <span class=nc>software</span><span class=p>.</span><span class=na>amazon</span><span class=p>.</span><span class=na>awssdk</span><span class=p>.</span><span class=na>internal</span><span class=p>.</span><span class=na>http</span><span class=p>.</span><span class=na>LowCopyListMap$$Lambda$1273</span><span class=o>/</span><span class=mh>0x0000000800edc840</span><span class=w></span>
<span class=n>Serialization</span><span class=w> </span><span class=n>trace</span><span class=p>:</span><span class=w></span>
<span class=n>mapConstructor</span><span class=w> </span><span class=p>(</span><span class=n>software</span><span class=p>.</span><span class=na>amazon</span><span class=p>.</span><span class=na>awssdk</span><span class=p>.</span><span class=na>internal</span><span class=p>.</span><span class=na>http</span><span class=p>.</span><span class=na>LowCopyListMap$ForBuilder</span><span class=p>)</span><span class=w></span>
<span class=n>headers</span><span class=w> </span><span class=p>(</span><span class=n>software</span><span class=p>.</span><span class=na>amazon</span><span class=p>.</span><span class=na>awssdk</span><span class=p>.</span><span class=na>http</span><span class=p>.</span><span class=na>DefaultSdkHttpFullRequest$Builder</span><span class=p>)</span><span class=w></span>
<span class=n>builder</span><span class=w> </span><span class=p>(</span><span class=n>jbcodeforce</span><span class=p>.</span><span class=na>bgdatajob</span><span class=p>.</span><span class=na>operators</span><span class=p>.</span><span class=na>Sig4SignedHttpRequestAsyncFunction$HttpRequest</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>at</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>esotericsoftware</span><span class=p>.</span><span class=na>kryo</span><span class=p>.</span><span class=na>util</span><span class=p>.</span><span class=na>DefaultClassResolver</span><span class=p>.</span><span class=na>readName</span><span class=p>(</span><span class=n>DefaultClassResolver</span><span class=p>.</span><span class=na>java</span><span class=p>:</span><span class=mi>138</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>at</span><span class=w> </span><span class=n>com</span><span class=p>.</span><span class=na>esotericsoftware</span><span class=p>.</span><span class=na>kryo</span><span class=p>.</span><span class=na>util</span><span class=p>.</span><span class=na>DefaultClassResolver</span><span class=p>.</span><span class=na>readClass</span><span class=p>(</span><span class=n>DefaultClassResolver</span><span class=p>.</span><span class=na>java</span><span class=p>:</span><span class=mi>115</span><span class=p>)</span><span class=w></span>
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../api-lambda/ class="md-footer__link md-footer__link--prev" aria-label="Previous: API Gateway - Lambda" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> API Gateway - Lambda </div> </div> </a> <a href=../java-apps/ class="md-footer__link md-footer__link--next" aria-label="Next: Tenant Manager" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Tenant Manager </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["content.code.annotate", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../assets/javascripts/bundle.9c69f0bc.min.js></script> </body> </html>